function drawGameBoard(){ctx.beginPath(),ctx.moveTo(tileSize,.05*tileSize),ctx.lineTo(tileSize,gameSize-.05*tileSize),ctx.lineWidth=lineSize,ctx.lineCap="round",ctx.strokeStyle=boardColor,ctx.stroke(),ctx.beginPath(),ctx.moveTo(2*tileSize+lineSize,gameSize-.05*tileSize),ctx.lineTo(2*tileSize+lineSize,.05*tileSize),ctx.lineWidth=lineSize,ctx.lineCap="round",ctx.strokeStyle=boardColor,ctx.stroke(),ctx.beginPath(),ctx.moveTo(.05*tileSize,tileSize),ctx.lineTo(gameSize-.05*tileSize,tileSize),ctx.lineWidth=lineSize,ctx.lineCap="round",ctx.strokeStyle=boardColor,ctx.stroke(),ctx.beginPath(),ctx.moveTo(gameSize-.05*tileSize,2*tileSize+lineSize),ctx.lineTo(.05*tileSize,2*tileSize+lineSize),ctx.lineWidth=lineSize,ctx.lineCap="round",ctx.strokeStyle=boardColor,ctx.stroke()}function playSquare(a){a.isEmpty===!0&&(player1===!0?(a.isX=!0,drawX(a.centerX,a.centerY)):(a.isO=!0,drawO(a.centerX,a.centerY)),a.isEmpty=!1,checkWin(),switchPlayer())}function switchPlayer(){player1===!0?(player1=!1,gameOver||(human?document.getElementById("player").innerHTML="Player 2's turn":document.getElementById("player").innerHTML="Computer's turn"),simple&&setTimeout(simpleAI,thinkTime),harder&&setTimeout(harderAI,thinkTime)):(player1=!0,gameOver||(human?document.getElementById("player").innerHTML="Player 1's turn":document.getElementById("player").innerHTML="Human's turn"))}function drawX(a,b){ctx.beginPath(),ctx.moveTo(a-.3*tileSize,b-.3*tileSize),ctx.lineTo(a+.3*tileSize,b+.3*tileSize),ctx.lineWidth=lineSize,ctx.lineCap="round",ctx.strokeStyle=xColor,ctx.stroke(),ctx.beginPath(),ctx.moveTo(a+.3*tileSize,b-.3*tileSize),ctx.lineTo(a-.3*tileSize,b+.3*tileSize),ctx.lineWidth=lineSize,ctx.lineCap="round",ctx.strokeStyle=xColor,ctx.stroke()}function drawO(a,b){ctx.beginPath(),ctx.arc(a,b,.33*tileSize,0,2*Math.PI),ctx.lineWidth=lineSize,ctx.strokeStyle=oColor,ctx.stroke()}function drawWin(a,b,c,d){var e;e=xWins===!0?xColor:oColor,ctx.beginPath(),ctx.moveTo(a,b),ctx.lineTo(c,d),ctx.lineWidth=1.4*lineSize,ctx.lineCap="round",ctx.strokeStyle=e,ctx.stroke()}function checkWin(){for(var a=0;a<possibleWins.length;a++)sqrs[possibleWins[a][0]].isX&&sqrs[possibleWins[a][1]].isX&&sqrs[possibleWins[a][2]].isX&&(xWins=!0,drawWin(sqrs[possibleWins[a][0]].centerX,sqrs[possibleWins[a][0]].centerY,sqrs[possibleWins[a][2]].centerX,sqrs[possibleWins[a][2]].centerY),p1Wins++,gameOver=!0,human?document.getElementById("player").innerHTML="Player 1 wins!":document.getElementById("player").innerHTML="Human wins!");for(var a=0;a<possibleWins.length;a++)sqrs[possibleWins[a][0]].isO&&sqrs[possibleWins[a][1]].isO&&sqrs[possibleWins[a][2]].isO&&(oWins=!0,drawWin(sqrs[possibleWins[a][0]].centerX,sqrs[possibleWins[a][0]].centerY,sqrs[possibleWins[a][2]].centerX,sqrs[possibleWins[a][2]].centerY),p2Wins++,gameOver=!0,human?document.getElementById("player").innerHTML="Player 2 wins!":document.getElementById("player").innerHTML="Computer wins!");sqrs[0].isEmpty||sqrs[1].isEmpty||sqrs[2].isEmpty||sqrs[3].isEmpty||sqrs[4].isEmpty||sqrs[5].isEmpty||sqrs[6].isEmpty||sqrs[7].isEmpty||sqrs[8].isEmpty||xWins||oWins||(gameOver=!0,document.getElementById("player").innerHTML="Cat's game!"),gameOver&&(human?(document.getElementById("p1Wins").innerHTML="Player 1 Wins: "+p1Wins,document.getElementById("p2Wins").innerHTML="Player 2 Wins: "+p2Wins):(document.getElementById("p1Wins").innerHTML="Human Wins: "+p1Wins,document.getElementById("p2Wins").innerHTML="Computer Wins: "+p2Wins),setTimeout(playAgain,1e3))}function playAgain(){document.getElementById("again").style.visibility="visible"}function resetWins(){p1Wins=0,p2Wins=0,document.getElementById("p1Wins").innerHTML="Player 1 Wins: "+p1Wins,document.getElementById("p2Wins").innerHTML="Player 2 Wins: "+p2Wins}function setHuman(){simple=!1,harder=!1,human=!0,newGame(),resetWins()}function setSimpleAI(){human=!1,harder=!1,simple=!0,newGame(),resetWins()}function setHarderAI(){human=!1,simple=!1,harder=!0,newGame(),resetWins()}function simpleAI(){if(player1===!1&&gameOver===!1){for(var a=[],b=0;b<sqrs.length;b++)sqrs[b].isEmpty&&a.push(b);var c=Math.floor(Math.random()*a.length);playSquare(sqrs[a[c]])}}function harderAI(){if(0==player1&&gameOver===!1){for(var a=[],b=0;b<sqrs.length;b++)sqrs[b].isEmpty&&a.push(b);for(var b=0;b<possibleWins.length;b++)sqrs[possibleWins[b][0]].isO&&sqrs[possibleWins[b][1]].isO&&sqrs[possibleWins[b][2]].isEmpty&&player1===!1&&playSquare(sqrs[possibleWins[b][2]]),sqrs[possibleWins[b][0]].isO&&sqrs[possibleWins[b][1]].isEmpty&&sqrs[possibleWins[b][2]].isO&&player1===!1&&playSquare(sqrs[possibleWins[b][1]]),sqrs[possibleWins[b][0]].isEmpty&&sqrs[possibleWins[b][1]].isO&&sqrs[possibleWins[b][2]].isO&&player1===!1&&playSquare(sqrs[possibleWins[b][0]]);for(var b=0;b<possibleWins.length;b++)sqrs[possibleWins[b][0]].isX&&sqrs[possibleWins[b][1]].isX&&sqrs[possibleWins[b][2]].isEmpty&&player1===!1&&playSquare(sqrs[possibleWins[b][2]]),sqrs[possibleWins[b][0]].isX&&sqrs[possibleWins[b][1]].isEmpty&&sqrs[possibleWins[b][2]].isX&&player1===!1&&playSquare(sqrs[possibleWins[b][1]]),sqrs[possibleWins[b][0]].isEmpty&&sqrs[possibleWins[b][1]].isX&&sqrs[possibleWins[b][2]].isX&&player1===!1&&playSquare(sqrs[possibleWins[b][0]]);if(!player1){var c=Math.floor(Math.random()*a.length);playSquare(sqrs[a[c]])}}}function newGame(){for(var a=0;a<9;a++)sqrs[a]={isEmpty:!0,isX:!1,isO:!1,centerX:0,centerY:0};sqrs[0].centerX=tileSize/2,sqrs[0].centerY=tileSize/2,sqrs[1].centerX=gameSize/2,sqrs[1].centerY=tileSize/2,sqrs[2].centerX=gameSize-tileSize/2,sqrs[2].centerY=tileSize/2,sqrs[3].centerX=tileSize/2,sqrs[3].centerY=gameSize/2,sqrs[4].centerX=gameSize/2,sqrs[4].centerY=gameSize/2,sqrs[5].centerX=gameSize-tileSize/2,sqrs[5].centerY=gameSize/2,sqrs[6].centerX=tileSize/2,sqrs[6].centerY=gameSize-tileSize/2,sqrs[7].centerX=gameSize/2,sqrs[7].centerY=gameSize-tileSize/2,sqrs[8].centerX=gameSize-tileSize/2,sqrs[8].centerY=gameSize-tileSize/2,player1=!0,xWins=!1,oWins=!1,gameOver=!1,human?(document.getElementById("player").innerHTML="Player 1's turn",document.getElementById("p1Wins").innerHTML="Player 1 Wins: "+p1Wins,document.getElementById("p2Wins").innerHTML="Player 2 Wins: "+p2Wins):(document.getElementById("player").innerHTML="Human's turn",document.getElementById("p1Wins").innerHTML="Human Wins: "+p1Wins,document.getElementById("p2Wins").innerHTML="Computer Wins: "+p2Wins),ctx.clearRect(0,0,canvas.width,canvas.height),drawGameBoard(),document.getElementById("again").style.visibility="hidden"}var canvas,ctx,gameSize=390,lineSize=5,tileSize=(gameSize-2*lineSize)/3,backColor="#72759c",boardColor="white",xColor="#42f4e8",oColor="#f4d142",p1Wins=0,p2Wins=0,human=!0,simple=!1,harder=!1,possibleWins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],thinkTime=500*Math.random()+500;document.body.style.backgroundColor=backColor,document.getElementById("player").style.color=boardColor,document.getElementById("again").style.color=xColor,document.getElementById("again").style.borderColor=oColor,document.getElementById("p1Wins").style.color=xColor,document.getElementById("p2Wins").style.color=oColor,document.getElementById("gameModeTitle").style.color=boardColor,canvas=document.createElement("canvas"),canvas.width=gameSize,canvas.height=gameSize,ctx=canvas.getContext("2d"),document.body.appendChild(canvas);var sqrs=[],player1,xWins,oWins,gameOver;canvas.onclick=function(a){var b={x:a.pageX-canvas.offsetLeft,y:a.pageY-canvas.offsetTop};(player1||human)&&(gameOver||(b.y>0&&b.y<=tileSize&&(b.x>0&&b.x<=tileSize&&playSquare(sqrs[0]),b.x>tileSize+lineSize&&b.x<=2*tileSize+lineSize&&playSquare(sqrs[1]),b.x>2*tileSize+2*lineSize&&b.x<=gameSize&&playSquare(sqrs[2])),b.y>tileSize+lineSize&&b.y<=2*tileSize+lineSize&&(b.x>0&&b.x<=tileSize&&playSquare(sqrs[3]),b.x>tileSize+lineSize&&b.x<=2*tileSize+lineSize&&playSquare(sqrs[4]),b.x>2*tileSize+2*lineSize&&b.x<=gameSize&&playSquare(sqrs[5])),b.y>2*tileSize+2*lineSize&&b.y<=gameSize&&(b.x>0&&b.x<=tileSize&&playSquare(sqrs[6]),b.x>tileSize+lineSize&&b.x<=2*tileSize+lineSize&&playSquare(sqrs[7]),b.x>2*tileSize+2*lineSize&&b.x<=gameSize&&playSquare(sqrs[8]))))},newGame();